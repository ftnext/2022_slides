
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <title>Sphinxで作るランディングページ</title>
    <link rel="stylesheet" type="text/css" href="../_static/revealjs4/dist/reveal.css" />
    <link rel="stylesheet" href="../_static/revealjs4/dist/theme/black.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/revealjs4/plugin/highlight/zenburn.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/common.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    


    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@ftnext">
    <meta property="og:url" content="https://ftnext.github.io/2022_slides/pyladies_tokyo_anniversary/landing_page_with_sphinx.html">
    <meta property="og:title" content="Sphinxで作るランディングページ">
    <meta property="og:description" content="2022/11 PyLadies Tokyo - 8周年記念オンラインパーティ LT スライド">
    <meta property="og:image" content="https://ftnext.github.io/2022_slides/_static/ogps/pyladies_tokyo_anniversary.png">

  </head><body>
    <div class="reveal">
        <div class="slides">
            <section >
<h1>Sphinxで作るランディングページ</h1>
<dl class="field-list simple">
<dt class="field-odd">Event<span class="colon">:</span></dt>
<dd class="field-odd"><p>PyLadies Tokyo - 8周年記念オンラインパーティ</p>
</dd>
<dt class="field-even">Presented<span class="colon">:</span></dt>
<dd class="field-even"><p>2022/11/19 nikkie</p>
</dd>
</dl>
</section>
<section >
<h2>8周年、おめでとうございます！🎂🎂🎂🎂🎂🎂🎂🎂</h2>
<p>お祝い8つ持参しました（1️⃣〜8️⃣）</p>
</section>
<section >
<h2>お前、誰よ</h2>
<ul class="simple">
<li><p><strong>Python</strong> 大好き、にっきー（<a class="reference external" href="https://2022.pycon.jp/timetable?id=LPYF7C">アスタリスク好き</a>）</p></li>
<li><p><span class="fab fa-twitter"></span> <a class="reference external" href="https://twitter.com/ftnext">&#64;ftnext</a> ／ <span class="fab fa-github"></span> <a class="reference external" href="https://github.com/ftnext">&#64;ftnext</a> ／ <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/">はてなブログ</a></p></li>
<li><p>株式会社ユーザベースでデータサイエンティスト（自然言語処理、XP）</p></li>
<li><p>2018年 <strong>4周年記念以来</strong> の参加（<a class="reference external" href="https://github.com/ftnext/2018_LTslides/blob/master/pyladies_Oct_Django_Girls/PITCHME.md">Django Girls Tutorial翻訳のLT</a>）</p></li>
</ul>
</section>
<section>
<section >
<h2>本編：この話をします</h2>
<blockquote class="twitter-tweet" data-align="center" data-dnt="true"><p lang="ja" dir="ltr"><a href="https://twitter.com/hashtag/pyconjp?src=hash&amp;ref_src=twsrc%5Etfw">#pyconjp</a><br>Python Boot Campのページ（静的なHTML）は<br>実は今年にっきーがSphinxに移行しました✌️（GitHub Pagesでサーブ）<a href="https://t.co/0QTfwXGxBh">https://t.co/0QTfwXGxBh</a><br><br>📣なんとSphinxでLPが作れちゃうんです！</p>&mdash; nikkie にっきー 🎤10/1 XP祭り 10/14-15 PyCon JP (@ftnext) <a href="https://twitter.com/ftnext/status/1581201590957924353?ref_src=twsrc%5Etfw">October 15, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></section>
<section >
<h3>お手元で触りながら聞くのがオススメです</h3>
<p><a class="reference external" href="https://pycamp-lp.pycon.jp/">https://pycamp-lp.pycon.jp/</a></p>
</section>
</section>
<section>
<section >
<h2>Python Boot Camp (#pycamp)</h2>
<ul class="simple">
<li><p><em>日本各地での初心者向けPythonチュートリアルイベント</em></p></li>
<li><p>詳しくは <a class="reference external" href="https://www.pycon.jp/support/bootcamp.html">https://www.pycon.jp/support/bootcamp.html</a></p></li>
<li><p>概要を伝える <strong>ランディングページ</strong> がある</p></li>
</ul>
</section>
<section >
<h3>pycampのランディングページについて相談</h3>
<blockquote>
<div><p>ペライチの仕様が3月28日から変更になり、無料プランは累計10,000PVを超えると有料プランへの切り替えが必要になった（切り替えないとページが強制的に非公開になる）。</p>
</div></blockquote>
<p>2022/03 <a class="reference external" href="https://www.pycon.jp/committee/meeting/minutes52.html#pycamp-ryu22e">一般社団法人PyCon JP Association運営会議#52</a></p>
</section>
<section >
<h3>手を挙げたnikkie氏🙋‍♂️「まかせて！」</h3>
<blockquote>
<div><p>Sphinxを使ってGitHub Pagesに移すなら、個人的な型があるので、私はやってみたいです (nikkie</p>
</div></blockquote>
</section>
</section>
<section>
<section >
<h2>ドキュメント変換ツール Sphinx</h2>
<blockquote>
<div><p>あるルールに従って記述されたテキストファイルを、HTMLやPDFなどの形式に変換する</p>
</div></blockquote>
<p>📖『<a class="reference external" href="https://www.oreilly.co.jp/books/9784873119830/">Sphinxをはじめよう 第3版</a>』（1章）</p>
</section>
<section >
<h3>reSTで書いたテキストファイル</h3>
<ul class="simple">
<li><p>「あるルール」の例：reST (reStructuredText)</p></li>
<li><p>reSTはマークアップ言語で、テキストのままでも読みやすい（『<a class="reference external" href="https://www.oreilly.co.jp/books/9784873119830/">Sphinxをはじめよう 第3版</a>』1.2）</p></li>
</ul>
<pre data-id="rest"><code data-trim data-noescape class="rest">========================================
すごいランディングページ
========================================

Sphinxで作っています
========================================

* Sphinxはドキュメント変換ツール
* reSTからHTMLへの変換を使っています</code></pre>
</section>
<section >
<h3>reSTをHTMLに変換</h3>
<pre data-id="resthtml"><code data-trim data-noescape class="shell">$ make html</code></pre>
<p>ブラウザでHTMLを開く</p>
<figure class="align-default">
<img alt="../_images/202211_sphinx_example.png" src="../_images/202211_sphinx_example.png" />
</figure>
</section>
<section >
<h3>HTMLをWebに公開</h3>
<ul class="simple">
<li><p>reSTから変換したHTMLは、静的サイトホスティングサービスを使ってWebに公開できる</p></li>
<li><p>今回のランディングページの例では <strong>GitHub Pages</strong> を使用</p></li>
<li><p>GitHub Pages用のブランチにHTML一式をpushする</p></li>
</ul>
</section>
</section>
<section>
<section >
<h2>ランディングページのこの要素、Sphinxでもできるんですか？</h2>
<p>ランディングページにはあるけど、ドキュメントではあまり見かけないモノたち</p>
</section>
<section >
<h3>ボタン</h3>
<figure class="align-default">
<img alt="../_images/202211_button_peraichi_ver.png" src="../_images/202211_button_peraichi_ver.png" />
</figure>
</section>
<section >
<h3>カードの並び</h3>
<figure class="align-default">
<img alt="../_images/202211_cards_peraichi_ver.png" src="../_images/202211_cards_peraichi_ver.png" />
</figure>
</section>
</section>
<section>
<section >
<h2><code class="docutils literal notranslate"><span class="pre">sphinx_design</span></code> も使ってできます！</h2>
<p><span class="fab fa-github"></span> <a class="reference external" href="https://github.com/executablebooks/sphinx-design">https://github.com/executablebooks/sphinx-design</a></p>
</section>
<section >
<h3>1️⃣🎂ボタンできます！</h3>
<pre data-id="id11"><code data-trim data-noescape class="rest">.. button-link:: https://docs.google.com/forms/d/1IANh21fievi_lyyQyL8II66RSxlVuHBdAhr05C1qv9c/viewform
    :align: center
    :class: sd-rounded-pill sd-px-4

    問い合わせる</code></pre>
<figure class="align-default">
<img alt="../_images/202211_button_sphinx_ver.png" src="../_images/202211_button_sphinx_ver.png" />
</figure>
<p><a class="reference external" href="https://sphinx-design.readthedocs.io/en/furo-theme/badges_buttons.html#buttons">https://sphinx-design.readthedocs.io/en/furo-theme/badges_buttons.html#buttons</a></p>
</section>
<section >
<h3>2️⃣🎂カードの並びもできます！</h3>
<pre data-id="id12"><code data-trim data-noescape class="rest">.. grid:: 1 1 2 3

    .. grid-item-card:: `&#64;pyohei &lt;https://github.com/pyohei&gt;`_
        :img-top: _static/impressions/pyohei.jpg
        :class-header: sd-text-center
        :class-title: sd-text-center sd-fs-3

        運営スタッフ
        ^^^
        運営スタッフとしてPythonを学ぶ方たちのサポートができ、やりがいと充実感を感じました。</code></pre>
<p><a class="reference external" href="https://sphinx-design.readthedocs.io/en/furo-theme/grids.html#placing-a-card-in-a-grid">https://sphinx-design.readthedocs.io/en/furo-theme/grids.html#placing-a-card-in-a-grid</a></p>
</section>
<section >
<h3>2️⃣🎂カードの並びもできます！</h3>
<figure class="align-default">
<img alt="../_images/202211_cards_sphinx_ver.png" src="../_images/202211_cards_sphinx_ver.png" />
</figure>
</section>
</section>
<section>
<section >
<h2>Sphinxのデフォルトテーマ Alabaster、存在感ある</h2>
<figure class="align-default">
<img alt="../_images/202211_default_alabaster.png" src="../_images/202211_default_alabaster.png" />
</figure>
</section>
<section >
<h3>3️⃣🎂Alabasterは <strong>簡単にスタイル変更</strong> できます！</h3>
<div class="literal-block-wrapper docutils container" id="id29">
<div class="code-block-caption"><span class="caption-text">conf.py</span></div>
<pre><code data-trim data-noescape class="python" data-line-numbers="2,3,4,5,6">html_theme = 'alabaster'
html_theme_options = {
    &quot;font_family&quot;: &quot;sans-serif&quot;,
    &quot;font_size&quot;: &quot;16px&quot;,
    &quot;link&quot;: &quot;#4EBBE2&quot;,
}</code></pre>
</div>
<p><a class="reference external" href="https://alabaster.readthedocs.io/en/latest/customization.html#fonts">https://alabaster.readthedocs.io/en/latest/customization.html#fonts</a></p>
</section>
<section >
<h3>Alabasterと言われても気づかないのでは？</h3>
<figure class="align-default">
<img alt="../_images/202211_set_options_alabaster.png" src="../_images/202211_set_options_alabaster.png" />
</figure>
</section>
</section>
<section >
<h2>細かいところに <strong>自作Sphinx拡張</strong></h2>
<p>4️⃣〜6️⃣🎂</p>
</section>
<section>
<section >
<h2>h1, h2の中央寄せ</h2>
<figure class="align-default">
<img alt="../_images/202211_centering_h1_h2.png" src="../_images/202211_centering_h1_h2.png" />
</figure>
</section>
<section >
<h3>4️⃣🎂拡張を自作（リポジトリ内にモジュールとして配置）</h3>
<ul class="simple">
<li><p>Sphinxのイベントの1つ <code class="docutils literal notranslate"><span class="pre">doctree-resolved</span></code> （<a class="reference external" href="https://www.sphinx-doc.org/ja/master/extdev/appapi.html#event-doctree-resolved">ドキュメント</a>）</p>
<ul>
<li><p>入力したテキストファイルを <strong>木</strong> 構造(doctree)に変えたとき</p></li>
</ul>
</li>
<li><p>木をたどって、HTMLでh1, h2にあたる要素に <code class="docutils literal notranslate"><span class="pre">sd-text-center</span></code> クラスを付与</p>
<ul>
<li><p>sphinx-designが提供する <strong>中央揃え</strong> のクラス</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section>
<section >
<h2>容易に更新できる、参加人数の表</h2>
<figure class="align-default">
<img alt="../_images/202211_editable_participants_table.png" src="../_images/202211_editable_participants_table.png" />
</figure>
</section>
<section >
<h3>要件：容易に表に行追加できる</h3>
<ul class="simple">
<li><p>時間とともにpycampの <strong>開催数は増える</strong> （<a class="reference external" href="https://pyconjp.connpass.com/event/">connpassのイベント一覧</a>）</p></li>
<li><p>実装に精通していなくても、参加人数の表を <strong>更新</strong> できるよう容易にするべきと考えた</p>
<ul>
<li><p>nikkieに毎回更新を頼む形は避けたい</p></li>
</ul>
</li>
</ul>
</section>
<section >
<h3>現状： <strong>CSVファイルに列の追加だけ</strong> していただく</h3>
<div class="literal-block-wrapper docutils container" id="id30">
<div class="code-block-caption"><span class="caption-text">participants_count.csv</span></div>
<pre><code data-trim data-noescape class="csv">開催地,URL,参加人数
静岡県沼津市,https://pyconjp.connpass.com/event/251468/,一般参加8人、学生3人
新潟2nd,https://pyconjp.connpass.com/event/255600/,一般参加10人、学生5人</code></pre>
</div>
<p><a class="reference external" href="https://github.com/pyconjp/pycamp.landing_page#%E9%81%8E%E5%8E%BB%E3%81%AE%E9%96%8B%E5%82%AC%E5%9B%9E%E3%81%A7%E9%9B%86%E3%81%BE%E3%81%A3%E3%81%9F%E4%BA%BA%E6%95%B0%E3%81%AE%E8%BF%BD%E5%8A%A0%E6%96%B9%E6%B3%95">GitHubリポジトリに記載した手順</a></p>
</section>
<section >
<h3>5️⃣🎂CSVファイルを元に人数表を作るディレクティブを自作</h3>
<pre data-id="id19"><code data-trim data-noescape class="python">class EventHistoryCSVTable(CSVTable):
    ...

def setup(app):
    app.add_directive(&quot;event-history-csv-table&quot;, EventHistoryCSVTable)</code></pre>
<ul class="simple">
<li><p><strong>開催地にリンクのマークアップ</strong> をした上で、参加人数と合わせて <code class="docutils literal notranslate"><span class="pre">CSVTable</span></code> に渡す実装（<a class="reference external" href="https://sphinx-users.jp/gettingstarted/directives.html#csv">CSVテーブルディレクティブ</a>）</p></li>
<li><p>CSVファイルに「開催地,URL,参加人数」だけ追加しさえすれば、後はコードが責務を果たす</p></li>
</ul>
</section>
</section>
<section>
<section >
<h2>外部へのリンクをブラウザの新しいタブで開く</h2>
<p>（少なくとも私は）ランディングページの説明とそこからのリンクを <strong>タブを切り替えて行き来</strong> したい</p>
</section>
<section >
<h3>6️⃣🎂自作拡張 <a class="reference external" href="https://pypi.org/project/sphinx-new-tab-link/">sphinx-new-tab-link</a> （公開済み）</h3>
<pre data-id="id22"><code data-trim data-noescape class="shell">pip install sphinx-new-tab-link</code></pre>
<div class="literal-block-wrapper docutils container" id="id31">
<div class="code-block-caption"><span class="caption-text">conf.py</span></div>
<pre><code data-trim data-noescape class="python">extensions = [
    &quot;sphinx_new_tab_link&quot;,
]</code></pre>
</div>
<p>詳しくは <a class="reference external" href="https://nikkie-ftnext.hatenablog.com/entry/release-sphinx-new-tab-link-v0.1.0">SphinxでビルドしたHTMLの中の外部リンクを、ブラウザの新しいタブで開くように設定する拡張 sphinx-new-tab-link を公開しました！🎉</a></p>
</section>
</section>
<section >
<h2>紹介しきれなかったもの（8つ紹介するのに5分はあまりにも短い）</h2>
<ul class="simple">
<li><p>7️⃣🎂 <code class="docutils literal notranslate"><span class="pre">sphinx.ext.githubpages</span></code> がGitHub Pagesでの公開をサポート（<a class="reference external" href="https://nikkie-ftnext.hatenablog.com/entry/do-you-know-sphinx-ext-githubpages">こちらのブログ</a>）</p></li>
<li><p>8️⃣🎂 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">singlehtml</span></code> 使ってます！</p></li>
</ul>
</section>
<section >
<h2>Sphinxで作るランディングページ やってみての感想</h2>
<ul class="simple">
<li><p><strong>技術的に少し挑戦</strong> しつつコミュニティに <strong>貢献</strong> という今回のやり方はとても楽しかった🤟</p></li>
<li><p>拡張が作れるようになるとSphinxは自在に使えるし、他の拡張の凄さも伺い知れる（Alabasterすごい！）</p></li>
<li><p>アスタリスク（星印）が好きなので、GitHubでスター🌟ください！(笑)</p></li>
</ul>
</section>
<section>
<section >
<h2>まとめ🌯 Sphinxで作るランディングページ</h2>
<ul class="simple">
<li><p><a class="reference external" href="https://pycamp-lp.pycon.jp/">https://pycamp-lp.pycon.jp/</a> はSphinxとGitHub Pagesでできています</p></li>
<li><p>ランディングページに必要な要素（ボタンやカード）は <strong>sphinx_design</strong> で</p></li>
<li><p><strong>Sphinx拡張を自作</strong> して、ランディングページの細かい要素を実現</p></li>
</ul>
</section>
<section >
<h3>ご清聴ありがとうございました！</h3>
<ul class="simple">
<li><p>地方でPythonイベントを開催してみたい方、pycampいかがですか？（<a class="reference external" href="https://ryu22e.org/posts/2022/11/12/djangocongressjp2022/#%E6%9C%80%E5%BE%8C%E3%81%AB">コアスタッフの方のブログ</a>）</p></li>
<li><p>参考にランディングページ作りたい方、困ったらお気軽に <a class="reference external" href="https://twitter.com/ftnext">&#64;ftnext</a> をお呼びください！</p></li>
</ul>
</section>
</section>
<section >
<h2>EOF</h2>
</section>

        </div>
    </div>
    
    <script src="../_static/revealjs4/dist/reveal.js"></script>
    
    
      <script src="../_static/revealjs4/plugin/highlight/highlight.js"></script>
      <script src="../_static/revealjs4/plugin/notes/notes.js"></script>
      
    
    <script>
        var revealjsConfig = new Object();
        Object.assign(revealjsConfig, 
    {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: "none",
        slideNumber: "c/t",
    }
);
        
        
        
          revealjsConfig.plugins = [
            RevealHighlight,RevealNotes,
          ];
        
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize(revealjsConfig);
    </script>

  </body>
</html>