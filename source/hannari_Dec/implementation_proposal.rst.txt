Part 2ï¸âƒ£ çœŸä¼¼ã—ã¦ä½œã‚‹æ­£è¦åŒ–å‡¦ç†
================================================================================

**éƒ¨å“åŒ–** ã—ãŸå‡¦ç†ã‚’ **çµ„åˆã›ã‚‹** å®Ÿè£…ã‚’ææ¡ˆ

å®Œå…¨ã«ç†è§£ã—ãŸï¼
--------------------------------------------------

* ã€Œè§£æå‰ã«è¡Œã†ã“ã¨ãŒæœ›ã¾ã—ã„æ–‡å­—åˆ—ã®æ­£è¦åŒ–å‡¦ç†ã€ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã¯åˆ†ã‹ã£ãŸ
* **è‡ªåˆ†ã ã£ãŸã‚‰ã©ã†å®Ÿè£…ã™ã‚‹ã‹** ã‚’è€ƒãˆã¦ã¿ã‚‹
* ã©ã‚“ãªAPIã«ã—ã‚ˆã†ã‹ã€OSSã‚’è¦³å¯Ÿ

ğŸ¤— tokenizers
================================================================================

* :fab:`github` https://github.com/huggingface/tokenizers
* æ­£è¦åŒ–å‡¦ç†ã‚’ã™ã‚‹ `Normalizers <https://huggingface.co/docs/tokenizers/api/normalizers>`__
* Pythonã§ä½¿ãˆã‚‹ã€‚ãŸã ã—ã€Rustå®Ÿè£…ã€‚`pyiãƒ•ã‚¡ã‚¤ãƒ« <https://github.com/huggingface/tokenizers/blob/v0.13.2/bindings/python/py_src/tokenizers/normalizers/__init__.pyi>`__ ã‚’ **è¦³å¯Ÿ**

ğŸ”ç™ºè¦‹1ï¼šã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã® **çµ±ä¸€**
--------------------------------------------------

* ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ ``Normalizer``
* :code:`normalize_str(text)` ã¯ text ã‚’æ­£è¦åŒ–ã—ãŸæ–‡å­—åˆ—ã‚’è¿”ã™

ğŸ”ç™ºè¦‹2ï¼šæ­£è¦åŒ–å‡¦ç†ã® **éƒ¨å“åŒ–**
--------------------------------------------------

* ``NFKC`` ï¼šUnicodeæ­£è¦åŒ–å‡¦ç†ã ã‘ã™ã‚‹Normalizer
* ``Strip`` ã‚„ ``Replace`` ãªã©
* ``Normalizer`` ã‚¯ãƒ©ã‚¹ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã®ã§ã€ã©ã‚Œã‚‚ :code:`normalize_str` ã‚’å‘¼ã³å‡ºã›ã°ã‚ˆã„

``Sequence`` ãŒã«ãã„
--------------------------------------------------

* **ã„ãã¤ã‹ã®æ­£è¦åŒ–å‡¦ç†ã‚’ã¾ã¨ã‚ãŸæ­£è¦åŒ–å‡¦ç†** ã‚’è¡¨ã™
* ``Normalizer`` ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã®ã§ :code:`normalize_str` ã‚’å‘¼ã³å‡ºã›ã°ã‚ˆã„

ä»Šå›ã¯ **Protocol** ã§ï¼ˆç´ æŒ¯ã‚Šï¼‰
================================================================================

* :code:`typing.Protocol` https://docs.python.org/ja/3/library/typing.html#typing.Protocol
* ãƒ€ãƒƒã‚¯ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ã‚’è¡¨ã›ã‚‹å‹ãƒ’ãƒ³ãƒˆï¼ˆã¨ã„ã†ç†è§£ï¼‰
* æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹ :code:`abc.ABC` ã‚’ä½¿ã£ã¦ã‚‚å…¨ç„¶ã§ãã‚‹ã¨æ€ã„ã¾ã™

``Normalizer`` ãƒ—ãƒ­ãƒˆã‚³ãƒ«
--------------------------------------------------

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :pyobject: Normalizer

è£œè¶³æƒ…å ±ğŸƒâ€â™‚ï¸
--------------------------------------------------

:code:`normalize` ãƒ¡ã‚½ãƒƒãƒ‰ãŒã‚ã‚Œã°ï¼ˆç¶™æ‰¿ã—ã¦ã„ãªãã¦ã‚‚ï¼‰Normalizer

å…·ä½“ Normalizer ãŸã¡
--------------------------------------------------

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :pyobject: Strip

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :pyobject: Replace

NormalizerãŸã¡ã‚’ã¾ã¨ã‚ä¸Šã’ã‚‹ ``Sequence``
--------------------------------------------------

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :pyobject: Sequence

æ–‡å­—åˆ—ä¸­ã®åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹Normalizer
--------------------------------------------------

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :pyobject: RemoveExtraSpaces

ãµã‚‹ã¾ã„ã¯åŒã˜ã§ã™ï¼ğŸ™Œ
--------------------------------------------------

.. literalinclude:: ../../samplecode/normalizers/assembled.py
    :language: python
    :linenos:
    :lines: 149-158
